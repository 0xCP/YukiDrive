(function(t){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],u=0,v=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},n={app:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"024c":function(t,e,a){"use strict";var i=a("7c52"),n=a.n(i);n.a},2926:function(t,e,a){"use strict";var i=a("d5a2"),n=a.n(i);n.a},3323:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e623"),a("e379"),a("5dc8"),a("37e1");var i=a("2b0e"),n=(a("d3b7"),a("bc3a")),r=a.n(n),o={},s=r.a.create(o);s.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=s,window.axios=s,Object.defineProperties(t.prototype,{axios:{get:function(){return s}},$axios:{get:function(){return s}}})},i["a"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("AppBar"),a("Drawer"),a("v-content",[a("router-view"),a("Snackbar")],1),a("Footer",{ref:"footer"})],1)},l=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{staticClass:"d-flex d-lg-none"},[a("v-app-bar-nav-icon",{on:{click:t.changeDrawer}}),a("v-toolbar-title",[t._v("Yuki Drive")]),a("v-spacer")],1)],1)},u=[],v={methods:{changeDrawer:function(){this.$store.commit("changeDrawerState")}}},m=v,f=a("2877"),p=a("6544"),h=a.n(p),g=a("40dc"),b=a("5bc1"),w=a("2fa4"),x=a("2a7f"),k=Object(f["a"])(m,d,u,!1,null,null,null),_=k.exports;h()(k,{VAppBar:g["a"],VAppBarNavIcon:b["a"],VSpacer:w["a"],VToolbarTitle:x["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:""},model:{value:t.isDrawerOpen,callback:function(e){t.isDrawerOpen=e},expression:"isDrawerOpen"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v(" "+t._s(this.$store.state.settings.appName)+" ")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},t._l(t.sites,(function(e){return a("v-list-item",{key:e.name,attrs:{link:"",to:"/"+e.name}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-microsoft-onedrive")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.nickName))])],1)],1)})),1)],1)},D=[],V={data:function(){return{sites:[]}},mounted:function(){var t=this;r.a.get(this.$store.state.settings.baseUrl+"/api/sites").then((function(e){t.sites=e.data}))},computed:{isDrawerOpen:{get:function(){return this.$store.state.isDrawerOpen},set:function(t){this.$store.commit("changeDrawerState",t)}}}},N=V,y=a("ce7e"),B=a("132d"),C=a("8860"),S=a("da13"),P=a("5d23"),O=a("34c3"),T=a("f774"),I=Object(f["a"])(N,$,D,!1,null,null,null),U=I.exports;h()(I,{VDivider:y["a"],VIcon:B["a"],VList:C["a"],VListItem:S["a"],VListItemContent:P["a"],VListItemIcon:O["a"],VListItemTitle:P["c"],VNavigationDrawer:T["a"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{right:"",top:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.$store.state.snackbar.message)+" "),a("v-btn",{attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(" 关闭 ")])],1)},E=[],L={data:function(){return{text:this.$store.state.snackbar.message}},computed:{snackbar:{set:function(t){this.$store.commit("changeSnackBarStatus",t)},get:function(){return this.$store.state.snackbar.isOpen}}}},z=L,F=a("8336"),M=a("2db4"),A=Object(f["a"])(z,j,E,!1,null,null,null),R=A.exports;h()(A,{VBtn:F["a"],VSnackbar:M["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{staticClass:"font-weight-medium mt-2"},[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("div",{staticClass:"footer",attrs:{id:"footer"}})])],1)},Y=[],G=a("a78e"),H=a.n(G),J=(a("b0c0"),a("2f62"));i["a"].use(J["a"]);var K=new J["a"].Store({state:{custom:{appName:"YukiDrive"},isDrawerOpen:void 0,snackbar:{message:void 0,isOpen:!1},settings:{appName:void 0,webName:void 0,navImg:void 0,defaultDrive:void 0,footer:void 0,baseUrl:""},show:{name:void 0,url:void 0,icon:void 0}},mutations:{changeDrawerState:function(t,e){t.isDrawerOpen=e||!t.isDrawerOpen},openSnackBar:function(t,e){t.snackbar.message=e,t.snackbar.isOpen=!0},changeSnackBarStatus:function(t,e){t.snackbar.isOpen=e},changeSettings:function(t,e){t.settings.appName=e.appName,t.settings.webName=e.webName,t.settings.navImg=e.navImg,t.settings.defaultDrive=e.defaultDrive,t.settings.footer=e.footer},showItem:function(t,e){t.show.name=e.name,t.show.url=e.url,t.show.icon=e.icon}},actions:{},modules:{}}),Z=a("d4cd"),Q=a.n(Z);function W(t){if(0===t)return"0 B";var e=1024,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,i)).toPrecision(3)+" "+a[i]}var X=function(t){K.commit("openSnackBar","出现错误："+t.response.data.message)};function tt(t,e,a){r()({url:t,method:"post",data:e,headers:{Authorization:"Bearer ".concat(H.a.get("token"))}}).then(a).catch(X)}function et(t,e,a){r()({url:t,method:"get",data:e,headers:{Authorization:H.a.get("token")?"Bearer ".concat(H.a.get("token")):""}}).then(a).catch(X)}function at(t,e,a){r()({url:t,method:"delete",params:e,headers:{Authorization:"Bearer ".concat(H.a.get("token"))}}).then(a).catch(X)}function it(t){var e=new Q.a;return e.render(t)}var nt={data:function(){return{footer:this.$store.state.settings.footer}},watch:{footer:function(){this.updateFooter()}},methods:{updateFooter:function(){document.getElementById("footer").innerHTML=it(this.$store.state.settings.footer)}}},rt=nt,ot=(a("e8d0"),a("62ad")),st=a("553a"),ct=Object(f["a"])(rt,q,Y,!1,null,null,null),lt=ct.exports;h()(ct,{VCol:ot["a"],VFooter:st["a"]});var dt={name:"App",components:{AppBar:_,Drawer:U,Snackbar:R,Footer:lt},data:function(){return{}},mounted:function(){var t=this;r.a.get(this.$store.state.settings.baseUrl+"/api/info").then((function(e){t.$store.commit("changeSettings",{appName:e.data.appName,webName:e.data.webName,navImg:e.data.navImg,defaultDrive:e.data.defaultDrive,footer:e.data.footer}),document.title=e.data.webName,t.$refs.footer.updateFooter(),"/"==t.$route.path&&t.$router.push(e.data.defaultDrive),t.$refs.footer.updateFooter()}))}},ut=dt,vt=a("7496"),mt=a("a75b"),ft=Object(f["a"])(ut,c,l,!1,null,null,null),pt=ft.exports;h()(ft,{VApp:vt["a"],VContent:mt["a"]});var ht=a("8c4f"),gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12","offset-md":"2",md:"8",align:"start",justify:"center"}},[a("v-card",[t.isInProgressing?a("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),0!=t.router.length?a("div",[a("v-breadcrumbs",{staticClass:"pl-4 pb-0 pt-4",attrs:{items:t.router}}),a("v-divider",{staticClass:"ml-4 mr-4 mt-1"})],1):t._e(),a("v-list",{attrs:{"two-line":""}},[0!=t.folders.length?a("div",[a("v-subheader",[t._v("文件夹")]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.folders,(function(e,i){return a("v-list-item",{key:i,attrs:{to:e.name,append:""}},[a("v-list-item-avatar",[a("v-icon",{attrs:{large:""}},[t._v("mdi-folder")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.createdTime+"  "+e.size)}})],1)],1)})),1)],1):t._e(),0!=t.files.length?a("div",[a("v-subheader",[t._v("文件")]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.files,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-avatar",[a("v-icon",{attrs:{large:""},on:{click:function(a){return t.openDetial(e)}}},[t._v(t._s(e.icon))])],1),a("v-list-item-content",{on:{click:function(a){return t.openDetial(e)}}},[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.createdTime+"  "+e.size)}})],1),a("v-list-item-action",[a("v-btn",{staticClass:"copy-url",attrs:{icon:"","data-clipboard-text":e.downloadUrl}},[a("v-icon",[t._v("mdi-content-copy")])],1)],1),a("v-list-item-action",{staticClass:"ml-0"},[a("v-btn",{attrs:{icon:"",href:e.downloadUrl},on:{click:function(a){return t.downloadFile(e.downloadUrl)}}},[a("v-icon",[t._v("mdi-download")])],1)],1)],1)})),1)],1):t._e()])],1),this.$route.params.folderPath?t._e():a("v-card",{staticClass:"mt-4"},[a("div",{staticClass:"pa-4 readme",attrs:{id:"readme"}})])],1)],1)],1)},bt=[],wt=(a("99af"),a("4160"),a("c975"),a("baa5"),a("a434"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),a("159b"),a("b311")),xt=a.n(wt),kt={data:function(){return{files:[],folders:[],router:[],isInProgressing:!1}},mounted:function(){new xt.a(".copy-url"),this.$route.params.folderPath?(this.changeRouter(),this.show(this.$route.params.folderPath)):this.$route.params.siteName&&(this.show(),this.loadReadme())},watch:{$route:function(){this.show(this.$route.params.folderPath),this.$route.params.folderPath?this.changeRouter():(this.router.splice(0),this.loadReadme())}},methods:{loadReadme:function(){r.a.get("https://localhost:5001/api/readme").then((function(t){document.getElementById("readme").innerHTML=it(t.data.readme)}))},changeProgressBar:function(){this.isInProgressing=!this.isInProgressing},show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.changeProgressBar(),this.folders.splice(0),this.files.splice(0);var a=function(e){e.data.forEach((function(e){e.createdTime=new Date(e.createdTime).toLocaleString("zh-CN",{year:"numeric",month:"numeric",day:"numeric"}),e.size=W(e.size),null==e.downloadUrl?t.folders.push(e):(e.icon=_t(e.name),t.files.push(e),t.$route.params.folderPath?e.downloadUrl="".concat(t.$store.state.settings.baseUrl,"/api/files/").concat(t.$route.params.siteName,"/").concat(t.$route.params.folderPath,"/").concat(e.name):e.downloadUrl="".concat(t.$store.state.settings.baseUrl,"/api/files/").concat(t.$route.params.siteName,"/").concat(e.name))})),t.changeProgressBar()};et("".concat(this.$store.state.settings.baseUrl,"/api/sites/").concat(this.$route.params.siteName,"/").concat(e),null,a)},changeRouter:function(){var t=this;this.router.splice(0);var e=this.$route.params.folderPath.split("/");this.router.push({text:"根目录",href:"#/".concat(this.$route.params.siteName),disabled:!1}),e.forEach((function(e){var a=new RegExp("".concat(e,".*")),i=t.$route.params.folderPath.replace(a,e);t.router.push({text:e,href:"#/".concat(t.$route.params.siteName,"/").concat(i),disabled:!1})})),this.router[this.router.length-1].disabled=!0},openDetial:function(t){this.$store.commit("showItem",{name:t.name,url:t.downloadUrl,icon:t.icon}),null!=_t(t.name).match("microsoft")&&window.open("https://view.officeapps.live.com/op/view.aspx?src="+t.downloadUrl),this.$router.push("/show")}}};function _t(t){var e=t.lastIndexOf("."),a=t.substr(e+1).toLowerCase(),i=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],n=["wmv","asf","asx","rm","rmvb","mpg","mpeg","mpe","3gp","mov","mp4","m4v","avi","dat","mkv","flv","vob"],r=["mp3","wav","wma","ape","flac","aac"],o=["zip","rar","7z","gz","bz2","xz","tar","tar.gz","tar.bz2","tar.xz"],s=["doc","docx"];return-1!==i.indexOf(a)?"mdi-image":-1!==n.indexOf(a)?"mdi-movie":-1!==r.indexOf(a)?"mdi-music":-1!==o.indexOf(a)?"mdi-folder-zip":-1!==s.indexOf(a)?"mdi-microsoft-word":"xlsx"==a?"mdi-microsoft-excel":"ppt"==a?"mdi-microsoft-powerpoint":"pdf"==a?"mdi-file-pdf-box":"mdi-file"}var $t=kt,Dt=(a("024c"),a("2bc5")),Vt=a("b0af"),Nt=a("a523"),yt=a("1800"),Bt=a("8270"),Ct=a("1baa"),St=a("8e36"),Pt=a("0fd9b"),Ot=a("e0c7"),Tt=Object(f["a"])($t,gt,bt,!1,null,null,null),It=Tt.exports;h()(Tt,{VBreadcrumbs:Dt["a"],VBtn:F["a"],VCard:Vt["a"],VCol:ot["a"],VContainer:Nt["a"],VDivider:y["a"],VIcon:B["a"],VList:C["a"],VListItem:S["a"],VListItemAction:yt["a"],VListItemAvatar:Bt["a"],VListItemContent:P["a"],VListItemGroup:Ct["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"],VProgressLinear:St["a"],VRow:Pt["a"],VSubheader:Ot["a"]});var Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12","offset-md":"2",md:"8",align:"start",justify:"center"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",flat:""}},[a("v-toolbar-title",[t._v("SharePoint 账户")])],1),a("v-card-text",[a("p",[t._v("账户类型："+t._s(t.settings.officeType))]),a("p",[t._v("当前账户："+t._s(t.settings.officeName))]),a("p",[t._v("当前状态："+t._s(t.settings.accountStatus))])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",href:this.$store.state.settings.baseUrl+"/api/admin/bind/url"}},[t._v("认证")])],1)],1),a("v-card",{staticClass:"mt-4"},[a("v-toolbar",{attrs:{dense:"",flat:""}},[a("v-toolbar-title",[t._v("SharePoint & Onedrive 站点")])],1),a("v-container",[a("v-row",t._l(t.drives,(function(e,i){return a("v-col",{key:i,attrs:{cols:"12",md:"6",lg:"4"}},[a("v-card",{attrs:{outlined:""}},[a("v-card-title",{staticClass:"d-flex justify-center"},[t._v(" "+t._s(e.nickName)+" ")]),a("v-card-subtitle",{staticClass:"d-flex justify-center"},[t._v(t._s(e.name))]),a("v-card-text",{staticClass:"d-flex justify-center"},[a("v-progress-circular",{attrs:{size:"200",width:"20",color:"primary",value:e.percent}},[t._v(" "+t._s(e.showUsed)+" / "+t._s(e.showTotal)+" ")])],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(a){return t.openEditDriveDialog(e)}}},[t._v("设置")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return t.unbind(e.nickName)}}},[t._v("解绑")])],1)],1)],1)})),1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog.newBindDialog=!0}}},[t._v("添加站点")])],1)],1),a("v-card",{staticClass:"mt-4"},[a("v-toolbar",{attrs:{dense:"",flat:""}},[a("v-toolbar-title",[t._v("基本设置")])],1),a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12"}},[a("v-text-field",{attrs:{label:"网站名称"},model:{value:t.settings.webName,callback:function(e){t.$set(t.settings,"webName",e)},expression:"settings.webName"}}),a("v-text-field",{attrs:{label:"导航栏显示名",hint:"左侧导航栏头部显示的文字"},model:{value:t.settings.appName,callback:function(e){t.$set(t.settings,"appName",e)},expression:"settings.appName"}}),a("v-text-field",{attrs:{label:"设置主驱动器",hint:"填写创建 SharePoint 站点时输入的名称，将被设置为打开网站默认显示的驱动器（输入 onedrive 则为 OneDrive ）"},model:{value:t.settings.defaultDrive,callback:function(e){t.$set(t.settings,"defaultDrive",e)},expression:"settings.defaultDrive"}}),a("v-text-field",{attrs:{label:"页脚",hint:"设置网站页脚，支持 Markdown，建议保留 Power by YukiDrive"},model:{value:t.settings.footer,callback:function(e){t.$set(t.settings,"footer",e)},expression:"settings.footer"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:t.updateSettings}},[t._v("提交")])],1)],1),a("v-card",{staticClass:"mt-4"},[a("v-toolbar",{attrs:{dense:"",flat:""}},[a("v-toolbar-title",[t._v("首页 README")])],1),a("div",{staticClass:"markdown pr-3 pl-3"},[a("Markdown",{model:{value:t.markdownText,callback:function(e){t.markdownText=e},expression:"markdownText"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:t.updateReadme}},[t._v("提交")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog.newBindDialog,callback:function(e){t.$set(t.dialog,"newBindDialog",e)},expression:"dialog.newBindDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" 新增绑定 ")]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"站点名称",hint:"创建 SharePoint 站点时输入的名称"},model:{value:t.newBind.siteName,callback:function(e){t.$set(t.newBind,"siteName",e)},expression:"newBind.siteName"}}),a("v-text-field",{attrs:{label:"显示名",hint:"这将用于在左边导航中显示"},model:{value:t.newBind.nickName,callback:function(e){t.$set(t.newBind,"nickName",e)},expression:"newBind.nickName"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.dialog.newBindDialog=!1}}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.addSite}},[t._v(" 提交 ")])],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog.editDriveDialog,callback:function(e){t.$set(t.dialog,"editDriveDialog",e)},expression:"dialog.editDriveDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v(" 修改驱动器设置 ")]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"名称"},model:{value:t.editDriveSettings.nickName,callback:function(e){t.$set(t.editDriveSettings,"nickName",e)},expression:"editDriveSettings.nickName"}}),a("v-text-field",{attrs:{label:"隐藏文件夹",hint:"填写需要隐藏的文件夹，文件夹名称间用 , 隔开，仅管理员可查看被隐藏的文件夹"},model:{value:t.editDriveSettings.hiddenFolders,callback:function(e){t.$set(t.editDriveSettings,"hiddenFolders",e)},expression:"editDriveSettings.hiddenFolders"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.dialog.editDriveDialog=!1}}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.editDriveName}},[t._v(" 提交 ")])],1)],1)],1)],1)},jt=[],Et=a("8e77"),Lt={components:{Markdown:Et["a"]},data:function(){return{drives:[],settings:{officeName:void 0,officeType:void 0,appName:void 0,webName:void 0,defaultDrive:void 0,accountStatus:void 0,footer:void 0},newBind:{siteName:void 0,nickName:void 0},dialog:{newBindDialog:!1,editDriveDialog:!1},editDriveSettings:{siteName:"",nickName:"",hiddenFolders:""},markdownText:""}},mounted:function(){var t=this;null==H.a.get("token")&&this.$router.push("login"),et(this.$store.state.settings.baseUrl+"/api/admin/info",null,(function(e){e.data.driveInfo.forEach((function(e){e.showTotal=W(e.quota.total),e.showUsed=W(e.quota.used),e.percent=e.quota.used/e.quota.total*100,t.drives.push(e)})),t.settings={officeName:e.data.officeName,officeType:e.data.officeType,appName:e.data.appName,webName:e.data.webName,defaultDrive:e.data.defaultDrive,accountStatus:e.data.accountStatus,footer:e.data.footer},t.markdownText=e.data.readme}))},methods:{updateSettings:function(){var t=this;tt(this.$store.state.settings.baseUrl+"/api/admin/settings",this.settings,(function(){t.$store.commit("openSnackBar","更新成功！"),t.$router.go(0)}))},addSite:function(){var t=this;tt(this.$store.state.settings.baseUrl+"/api/admin/sites",this.newBind,(function(){t.$store.commit("openSnackBar","绑定成功！"),t.dialog.newBindDialog=!1,t.$router.go(0)}))},unbind:function(t){var e=this;at(this.$store.state.settings.baseUrl+"/api/admin/sites",{nickName:t},(function(){e.$store.commit("openSnackBar","已解除绑定"),e.dialog.newBindDialog=!1,e.$router.go(0)}))},openEditDriveDialog:function(t){this.editDriveSettings.nickName=t.nickName,this.editDriveSettings.hiddenFolders=t.hiddenFolders,this.editDriveSettings.siteName=t.name,this.dialog.editDriveDialog=!0},editDriveName:function(){var t=this;tt(this.$store.state.settings.baseUrl+"/api/admin/sites/settings",this.editDriveSettings,(function(){t.$store.commit("openSnackBar","已更新驱动器设置"),t.dialog.newBindDialog=!1,t.$router.go(0)}))},updateReadme:function(){var t=this;tt(this.$store.state.settings.baseUrl+"/api/admin/readme",{text:this.markdownText},(function(){t.$store.commit("openSnackBar","已更新 readme"),t.dialog.newBindDialog=!1,t.$router.go(0)}))}}},zt=Lt,Ft=a("99d9"),Mt=a("169a"),At=a("4bd4"),Rt=a("490a"),qt=a("8654"),Yt=a("71d9"),Gt=Object(f["a"])(zt,Ut,jt,!1,null,null,null),Ht=Gt.exports;h()(Gt,{VBtn:F["a"],VCard:Vt["a"],VCardActions:Ft["a"],VCardSubtitle:Ft["b"],VCardText:Ft["c"],VCardTitle:Ft["d"],VCol:ot["a"],VContainer:Nt["a"],VDialog:Mt["a"],VDivider:y["a"],VForm:At["a"],VProgressCircular:Rt["a"],VRow:Pt["a"],VSpacer:w["a"],VTextField:qt["a"],VToolbar:Yt["a"],VToolbarTitle:x["a"]});var Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("进入后台")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"用户名",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:t.UserName,callback:function(e){t.UserName=e},expression:"UserName"}}),a("v-text-field",{attrs:{id:"password",label:"密码",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:t.UserPassword,callback:function(e){t.UserPassword=e},expression:"UserPassword"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.Login}},[t._v("登录")])],1)],1)],1)],1)],1)},Kt=[],Zt={data:function(){return{UserName:null,UserPassword:null}},methods:{Login:function(){var t=this;r.a.post(this.$store.state.settings.baseUrl+"/api/user/authenticate",{username:this.UserName,password:this.UserPassword}).then((function(e){e.data.error?t.$store.commit("openSnackBar",e.data.message):(H.a.set("token",e.data.token,{expires:7}),t.$store.commit("openSnackBar","登录成功"),t.$router.push("admin"))}))}}},Qt=Zt,Wt=Object(f["a"])(Qt,Jt,Kt,!1,null,null,null),Xt=Wt.exports;h()(Wt,{VBtn:F["a"],VCard:Vt["a"],VCardActions:Ft["a"],VCardText:Ft["c"],VCol:ot["a"],VContainer:Nt["a"],VForm:At["a"],VRow:Pt["a"],VSpacer:w["a"],VTextField:qt["a"],VToolbar:Yt["a"],VToolbarTitle:x["a"]});var te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"10","offset-md":"1",align:"start",justify:"center"}},[a("v-card",[a("v-card-title",[a("v-icon",[t._v(t._s(this.$store.state.show.icon))]),t._v(t._s(this.$store.state.show.name)+" ")],1),a("v-divider"),a("v-card-text",[a("div",{attrs:{id:"dplayer"}}),"mdi-image"==this.$store.state.show.icon?a("v-img",{attrs:{src:this.$store.state.show.url},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{size:"75",indeterminate:""}})],1)]},proxy:!0}],null,!1,1359753949)}):t._e(),a("v-text-field",{staticClass:"mt-4",attrs:{"hide-details":"",readonly:"",label:"下载链接",value:this.$store.state.show.url}}),"mdi-image"==this.$store.state.show.icon?a("v-text-field",{staticClass:"mt-4",attrs:{"hide-details":"",readonly:"",label:"Markdown",value:"![image]("+this.$store.state.show.url+")"}}):t._e()],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""}},[t._v("下载")])],1)],1)],1)],1),a("v-btn",{staticClass:"float-btn",attrs:{fab:"",dark:"",color:"cyan"},on:{click:t.goBack}},[a("v-icon",[t._v("mdi-undo-variant")])],1)],1)},ee=[],ae=(a("eccb"),a("f7a5")),ie=a.n(ae),ne={data:function(){return{fab:!1}},mounted:function(){"mdi-movie"==this.$store.state.show.icon&&new ie.a({container:document.getElementById("dplayer"),screenshot:!0,autoplay:!0,video:{url:this.$store.state.show.url}})},methods:{goBack:function(){this.$router.go(-1)}}},re=ne,oe=(a("2926"),a("adda")),se=Object(f["a"])(re,te,ee,!1,null,null,null),ce=se.exports;h()(se,{VBtn:F["a"],VCard:Vt["a"],VCardActions:Ft["a"],VCardText:Ft["c"],VCardTitle:Ft["d"],VCol:ot["a"],VContainer:Nt["a"],VDivider:y["a"],VIcon:B["a"],VImg:oe["a"],VProgressCircular:Rt["a"],VRow:Pt["a"],VTextField:qt["a"]}),i["a"].use(ht["a"]);var le=[{path:"/show",name:"show",component:ce},{path:"/admin",name:"admin",component:Ht},{path:"/login",name:"login",component:Xt},{path:"/:siteName?/:folderPath*",name:"Index",component:It}],de=new ht["a"]({routes:le}),ue=de,ve=a("f309");i["a"].use(ve["a"]);var me=new ve["a"]({});i["a"].config.productionTip=!1,new i["a"]({store:K,router:ue,vuetify:me,render:function(t){return t(pt)}}).$mount("#app")},"7c52":function(t,e,a){},d5a2:function(t,e,a){},e8d0:function(t,e,a){"use strict";var i=a("3323"),n=a.n(i);n.a}});
//# sourceMappingURL=app.878198ca.js.map